<Window x:Class="PRN212_PROJECT.View.ManageFood"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:local="clr-namespace:PRN212_PROJECT.View"
        xmlns:BaseVM="clr-namespace:PRN212_PROJECT.View_Model"
        mc:Ignorable="d"
        DataContext="{StaticResource ManagaFoodVM}"
        Title="ManageFood" Height="1080" Width="1920">
    <Window.Resources>
        <BaseVM:BaseViewModel x:Key="ImagePathConverter"/>
        <BaseVM:ManageFoodVM x:Key="StatusToBoolConverter"/>
    </Window.Resources>
    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="100" />
            <RowDefinition Height="487*" />
            <RowDefinition Height="477*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Background="Red">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0">
                <materialDesign:PackIcon Kind="FoodForkDrink" Width="40" Height="40" Foreground="White" Margin="0,0,16,0"/>
                <TextBlock Text="QUẢN LÝ DANH MỤC" FontSize="30" FontWeight="Bold" Foreground="White" VerticalAlignment="Center" />
            </StackPanel>

            <Button Grid.Column="2" Style="{StaticResource MaterialDesignRaisedButton}" Background="White" Foreground="Red" Margin="20,0">
                <materialDesign:PackIcon Kind="ArrowLeft" />
            </Button>
        </Grid>

        <!-- Main Content -->
        <materialDesign:Card Grid.Row="1" Margin="16,16,16,16" UniformCornerRadius="8" Grid.RowSpan="2">
            <Grid>
                <Grid.ColumnDefinitions>
                    <!-- Left column: 2/3 for Food List -->
                    <ColumnDefinition Width="2*" />
                    <!-- Right column: 1/3 for Form -->
                    <ColumnDefinition Width="1*" />
                </Grid.ColumnDefinitions>

                <!-- Left Column: Food List -->
                <Grid Grid.Column="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <!-- Header -->
                    <Grid Grid.Row="0" Background="#FFEBEE">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="DANH SÁCH MÓN ĂN" FontSize="18" FontWeight="Bold" Margin="8,4" />

                        <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="8,4">
                            <Button Style="{StaticResource MaterialDesignFloatingActionMiniButton}" Background="Green" Margin="0,0,8,0">
                                <materialDesign:PackIcon Kind="Plus" />
                            </Button>
                            <Button Style="{StaticResource MaterialDesignFloatingActionMiniButton}" Background="Red">
                                <materialDesign:PackIcon Kind="Delete" />
                            </Button>
                        </StackPanel>
                    </Grid>

                    <!-- Search and Filter -->
                    <Grid Grid.Row="1" Margin="16,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <TextBox Grid.Column="0" materialDesign:HintAssist.Hint="Tìm kiếm món ăn..." Margin="0,0,16,0" />

                        <ComboBox Grid.Column="1" Width="150" materialDesign:HintAssist.Hint="Loại món">
                            <ComboBoxItem Content="Tất cả" IsSelected="True"/>
                            <ComboBoxItem Content="Đồ ăn"/>
                            <ComboBoxItem Content="Thức uống"/>
                            <ComboBoxItem Content="Đồ ăn vặt"/>
                        </ComboBox>
                    </Grid>

                    <!-- DataGrid -->
                    <DataGrid x:Name="ListFood" Grid.Row="2" Margin="16,8" CanUserAddRows="False" AutoGenerateColumns="False" 
                      GridLinesVisibility="All" ItemsSource="{Binding FoodList}" SelectedItem="{Binding SelectedFood}" >
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Width="50" Binding="{Binding ID, Mode=OneWay}" />
                            <DataGridTemplateColumn Header="Ảnh" Width="200">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Image Source="{Binding Image, Converter={StaticResource ImagePathConverter}}" 
                                       Width="100" Height="100" Stretch="Uniform" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="Tên món" Width="100" Binding="{Binding Name, Mode=OneWay}" />
                            <DataGridTextColumn Header="Loại" Width="100" Binding="{Binding Type, Mode=OneWay}" />
                            <DataGridTextColumn Header="Giá" Width="100" Binding="{Binding Price, Mode=OneWay, StringFormat={}{0:N0}}" />

                            <DataGridTemplateColumn Header="Trạng Thái" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding Status ,Mode=OneWay}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Thao tác" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Style="{StaticResource MaterialDesignIconButton}" Padding="2">
                                                <materialDesign:PackIcon Kind="Pencil" />
                                            </Button>
                                            <Button Style="{StaticResource MaterialDesignIconButton}" Padding="2">
                                                <materialDesign:PackIcon Kind="Delete" />
                                            </Button>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>

                <materialDesign:Card Grid.Column="1" Margin="16" UniformCornerRadius="8">
                    <StackPanel Margin="16">
                        <TextBlock Text="CHỈNH SỬA MÓN ĂN" FontSize="18" FontWeight="Bold" Margin="0,0,0,16" />

                        <!--ID-->
                        <Label Name="lbID" Content="{Binding ElementName=ListFood, Path=SelectedItem.ID, Mode=OneWay}" />

                        <!-- Name -->
                        <TextBox Name="txtName" materialDesign:HintAssist.Hint="Tên món" 
                 Text="{Binding ElementName=ListFood, Path=SelectedItem.Name, Mode=OneWay}" 
                 Margin="0,0,0,25" />

                        <!-- Type -->
                        <ComboBox Name="cbxType" materialDesign:HintAssist.Hint="Loại món" 
                  ItemsSource="{Binding TypeList}" 
                  SelectedItem="{Binding ElementName=ListFood, Path=SelectedItem.Type, Mode=OneWay}" 
                  Margin="0,20,0,16">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" />
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>

                        <!-- Price -->
                        <TextBox Name="txtPrice" materialDesign:HintAssist.Hint="Giá" 
                 Text="{Binding ElementName=ListFood, Path=SelectedItem.Price, Mode=OneWay, StringFormat={}{0:N0}}" 
                 Margin="0,20,0,25" />

                        <!-- Status -->
                        <CheckBox Name="cbStatus" Content="Kích hoạt" 
                  IsChecked="{Binding ElementName=ListFood, Path=SelectedItem.Status, Mode=OneWay}" 
                  Margin="0,20,0,25" />

                        <!-- Image Upload and Preview -->
                        <StackPanel Margin="0,20,0,25" MinHeight="250">
                            <Image Name="UploadedImage" Width="300" Height="200" Stretch="Uniform" />
                            <TextBox Name="txtImagePath" Visibility="Collapsed" />
                            <Button Content="Upload Image" Width="120" Height="30" Click="UploadImage_Click" Margin="0,10,0,0"/>
                        </StackPanel>

                        <!-- Save Button -->
                        <Button Style="{StaticResource MaterialDesignRaisedButton}" 
                Content="LƯU" 
                Background="Green" Foreground="White" Margin="0,20,0,8" Name="btnUpdate" Click="btnUpdate_Click"/>

                        <!-- Cancel Button -->
                        <Button Style="{StaticResource MaterialDesignRaisedButton}" 
                Content="HỦY" 
                Background="Red" Foreground="White" Name="btnClear" Click="btnClear_Click"/>
                    </StackPanel>
                </materialDesign:Card>
            </Grid>
        </materialDesign:Card>
    </Grid>
</Window>
